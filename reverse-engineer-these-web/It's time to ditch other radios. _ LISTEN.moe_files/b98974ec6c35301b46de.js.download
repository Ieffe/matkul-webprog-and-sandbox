(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{331:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(342),o=n(343),c=n(345),l=n(344),d=n(346),m=n(338),f=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(e){return Object(m.p)(t,n.nodes.paragraph,e)}}},{key:"name",get:function(){return"paragraph"}},{key:"schema",get:function(){return{attrs:{textAlign:{default:"left"}},content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p",getAttrs:function(e){return{textAlign:e.style.textAlign||"left"}}}],toDOM:function(e){return["p",{style:"text-align: ".concat(e.attrs.textAlign)},0]}}}}]),t}(n(328).g)},336:function(e,t,n){"use strict";var r=n(328),o=n(340),c=n(331),l={components:{EditorContent:r.b},props:{content:{type:String,default:null}},data:function(){return{editor:null}},watch:{content:function(){this.editor.setContent(this.$xss.filter(this.content))}},beforeDestroy:function(){this.editor&&this.editor.destroy()},mounted:function(){this.content||(this.content="- No content -"),this.editor=new r.a({editable:!1,extensions:[new o.a,new o.c,new o.e,new o.f,new o.g({levels:[1,2,3]}),new o.i,new o.l,new o.m,new o.b,new o.d,new o.j,new o.k,new o.n,new o.q,new c.a],content:this.$xss.filter(this.content)})}},d=n(2),component=Object(d.a)(l,function(){var e=this.$createElement;return(this._self._c||e)("editor-content",{staticClass:"editor__content editor readonly",attrs:{editor:this.editor}})},[],!1,null,null,null);t.a=component.exports},354:function(e,t,n){},388:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"news"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"news"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:86}};n.loc.source={body:"query news {\n\tnews {\n\t\tid\n\t\ttype\n\t\ttitle\n\t\tslug\n\t\tcontent\n\t\tcreatedAt\n\t\teditedAt\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,n)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,n)}),t.definitions&&t.definitions.forEach(function(t){e(t,n)})}(e,t),r[e.name.value]=t}}),e.exports=n,e.exports.news=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var c=r[t]||new Set,l=new Set,d=new Set;for(c.forEach(function(e){d.add(e)});d.size>0;){var m=d;d=new Set,m.forEach(function(e){l.has(e)||(l.add(e),(r[e]||new Set).forEach(function(e){d.add(e)}))})}return l.forEach(function(t){var r=o(e,t);r&&n.definitions.push(r)}),n}(n,"news")},389:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createNews"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createNews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:142}};n.loc.source={body:"mutation createNews($type: Int!, $title: String!, $content: String!) {\n\tcreateNews(type: $type, title: $title, content: $content) {\n\t\tid\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,n)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,n)}),t.definitions&&t.definitions.forEach(function(t){e(t,n)})}(e,t),r[e.name.value]=t}}),e.exports=n,e.exports.createNews=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var c=r[t]||new Set,l=new Set,d=new Set;for(c.forEach(function(e){d.add(e)});d.size>0;){var m=d;d=new Set,m.forEach(function(e){l.has(e)||(l.add(e),(r[e]||new Set).forEach(function(e){d.add(e)}))})}return l.forEach(function(t){var r=o(e,t);r&&n.definitions.push(r)}),n}(n,"createNews")},401:function(e,t,n){"use strict";var r=n(354);n.n(r).a},462:function(e,t,n){"use strict";n.r(t);n(12);var r,o,c=n(5),l=n(388),d=n.n(l),m=n(389),f=n.n(m),v={components:{ReadOnly:n(336).a,Editor:function(){return n.e(2).then(n.bind(null,471)).then(function(e){return e.default||e})}},head:function(){return{title:"Latest news",meta:[{hid:"twitter:card",name:"twitter:card",content:"summary"},{hid:"twitter:title",name:"twitter:title",content:"Latest news"},{hid:"twitter:description",name:"twitter:description",content:"Latest news blog following the development of the radio and it's services."},{hid:"twitter:image",name:"twitter:image",content:this.artist?"https://cdn.listen.moe/artists/".concat(this.artist.image):""},{hid:"og:url",property:"og:url",content:"https://listen.moe".concat(this.$route.fullPath)},{hid:"og:title",property:"og:title",content:"Latest news"},{hid:"og:description",property:"og:description",content:"Latest news blog following the development of the radio and it's services."},{hid:"og:image",property:"og:image",content:"https://listen.moe/images/share.jpg"},{hid:"og:image:secure_url",property:"og:image:secure_url",content:"https://listen.moe/images/share.jpg"}]}},data:function(){return{news:[],showPostCreate:!1,newPostTitle:null}},computed:{user:function(){return this.$store.state.user}},asyncData:(o=Object(c.a)(regeneratorRuntime.mark(function e(t){var n,r,data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.app,e.prev=1,e.next=4,n.apolloProvider.defaultClient.query({query:d.a});case 4:return r=e.sent,data=r.data,e.abrupt("return",{news:data.news});case 9:return e.prev=9,e.t0=e.catch(1),n.store.dispatch("alert",{message:e.t0.message,error:!0,duration:5e3}),e.abrupt("return",{news:[]});case 13:case"end":return e.stop()}},e,null,[[1,9]])})),function(e){return o.apply(this,arguments)}),methods:{savePost:(r=Object(c.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$refs.editor.parsed){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$apollo.mutate({mutation:f.a,variables:{type:1,title:this.newPostTitle,content:this.$refs.editor.parsed}});case 5:this.$store.dispatch("alert","Successfully created post"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.$store.dispatch("alert",{message:e.t0.message,error:!0,duration:5e3});case 11:case"end":return e.stop()}},e,this,[[2,8]])})),function(){return r.apply(this,arguments)})}},h=(n(401),n(2)),component=Object(h.a)(v,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"hero is-fullheight"},[n("div",{staticClass:"hero-body baseline"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title"},[e._v("\n\t\t\t\tNews\n\t\t\t")]),e._v(" "),n("h2",{staticClass:"subtitle mb2"},[e._v("\n\t\t\t\tThe latest news about the platform?\n\t\t\t")]),e._v(" "),e.user&&e.user.isAdmin?[n("button",{staticClass:"create",on:{click:function(t){e.showPostCreate=!0}}},[e._v("\n\t\t\t\t\tCreate new post\n\t\t\t\t")])]:e._e(),e._v(" "),e._l(e.news,function(t){return n("div",{key:t.id,staticClass:"post mb5"},[n("h2",{staticClass:"subtitle mb0"},[n("nuxt-link",{attrs:{to:"/news/"+t.slug}},[e._v("\n\t\t\t\t\t\t"+e._s(t.title)+"\n\t\t\t\t\t")])],1),e._v(" "),n("span",{staticClass:"created mb1"},[n("timeago",{attrs:{datetime:parseInt(t.createdAt,10),"auto-update":60}})],1),e._v(" "),n("div",{staticClass:"post-content shadow"},[n("ReadOnly",{attrs:{content:t.content}})],1)])})],2)]),e._v(" "),e.showPostCreate?n("div",{staticClass:"modal"},[n("div",{staticClass:"backdrop",on:{click:function(t){e.showPostCreate=!1}}}),e._v(" "),n("div",{staticClass:"card shadow dark"},[n("div",{staticClass:"card-body"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPostTitle,expression:"newPostTitle"}],staticClass:"mb2",attrs:{type:"text",placeholder:"Post title"},domProps:{value:e.newPostTitle},on:{input:function(t){t.target.composing||(e.newPostTitle=t.target.value)}}}),e._v(" "),n("Editor",{ref:"editor",attrs:{content:"Write here..."}})],1),e._v(" "),n("div",{staticClass:"card-footer"},[n("button",{staticClass:"primary light",on:{click:function(t){e.showPostCreate=!1}}},[e._v("\n\t\t\t\t\tCancel\n\t\t\t\t")]),e._v(" "),n("button",{staticClass:"primary light",on:{click:e.savePost}},[e._v("\n\t\t\t\t\tSave\n\t\t\t\t")])])])]):e._e()])},[],!1,null,"6b41aee4",null);t.default=component.exports}}]);