(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{332:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACABAMAAAAxEHz4AAAAGFBMVEX////n6vDt7/T19/nx8/bj5+36+/zq7fL8JYZnAAABdUlEQVRo3u3VS2+CQBSG4UPBcct4qdtqJG7HIl1Tat1TLmusCd2ijfHvdxhoS9mdmcTG5DyJiSx4+UImAQghhBBCCLmex0XPSgCKx/+aTUNAmUOPdfuBgUbgIMwWOFlcGC143a1dowUjYKnJAjsBOBksUI8fGb0DT3zk3QUMGxjGmegu8PgnLgCbHdS27YJN9KZ1Eln88w4mWgEnE80CYIlWwFpV7QJbLxDYuepoBSKoz0L6vSDHBlimHjtvFzguNjCcJGC5EIhmwR06EIhzIe+2KrVAIzCTz5d/nLxZMKxQAXUji8cALG0WWA/IwEDeENSzj2qBbCADnvzZQr0LuQAd+D03crsK7AUmUJb7+7L1PpZXIQSoAO+TgQIT8HvWKmD2aXsGw8D83wMXQPAuPecQRoAQLfqEDBiagBmWXD3Alv5T59LGB7g0W774RRPIAa30tys+zTg/Lf3ScUEPO2wWR87jqQsGitKPQiCEEEIIIeSGfAFkEEjXCvCtagAAAABJRU5ErkJggg=="},333:function(e,n,t){"use strict";t(12);var r,o,d=t(5),l=(t(63),t(28)),c=t(420),m=t.n(c),f=t(421),v=t.n(f),k=t(422),h=t.n(k),y=t(423),S=t.n(y),N=t(424),E=t.n(N),w=t(425),A=t.n(w),I={components:{Budicon:l.a},props:{image:{type:String,default:""},type:{type:String,default:""},thingId:{type:String,default:""},edit:{type:Boolean,default:!1},supporter:{type:Boolean,default:!1},own:{type:Boolean,default:!1},sizeY:{type:Number,default:192},sizeX:{type:Number,default:192},quality:{type:Number,default:2.666666666666667}},data:function(){return{myCroppa:null,isEditing:!1,mime:null}},computed:{user:function(){return this.$store.state.user},canEdit:function(){return!!this.own||this.user&&(this.user.isAdmin||this.user.isJudge||this.user.isEditor)}},methods:{savePicture:(o=Object(d.a)(regeneratorRuntime.mark(function e(){var picture,n,t,data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("userAvatar"===this.type||"userBanner"===this.type||this.thingId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.myCroppa.promisedBlob(this.mime,1);case 4:return picture=e.sent,n=null,"artist"===this.type?n=m.a:"source"===this.type?n=v.a:"album"===this.type?n=h.a:"userAvatar"===this.type?n=S.a:"userBanner"===this.type?n=E.a:"character"===this.type&&(n=A.a),e.prev=7,e.next=10,this.$apollo.mutate({mutation:n,variables:{id:this.thingId?parseInt(this.thingId,10):0,image:picture}});case 10:t=e.sent,data=t.data,this.$emit("pictureChange",{type:this.type,image:data}),this.$store.dispatch("alert","Successfully changed picture"),this.isEditing=!1,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),this.$store.dispatch("alert",{message:e.t0.message,error:!0,duration:5e3});case 20:case"end":return e.stop()}},e,this,[[7,17]])})),function(){return o.apply(this,arguments)}),savePictureGif:(r=Object(d.a)(regeneratorRuntime.mark(function e(n){var t,r,data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,"userAvatar"===this.type&&(t=S.a),e.prev=2,e.next=5,this.$apollo.mutate({mutation:t,variables:{id:this.thingId?parseInt(this.thingId,10):0,image:n}});case 5:r=e.sent,data=r.data,this.$emit("pictureChange",{type:this.type,image:data}),this.$store.dispatch("alert","Successfully changed picture"),this.isEditing=!1,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.$store.dispatch("alert",{message:e.t0.message,error:!0,duration:5e3});case 15:case"end":return e.stop()}},e,this,[[2,12]])})),function(e){return r.apply(this,arguments)}),handleCroppaFileChoose:function(e){var n=this;if(this.mime=e.type,"image/gif"===e.type)return this.supporter?(this.isEditing=!0,this.savePictureGif(e)):(this.isEditing=!1,this.$store.dispatch("alert",{message:"GIF uploading is reserved for supporters only",error:!0,duration:5e3}));var t=URL.createObjectURL(e),img=new Image;img.onload=function(){var e=img.width/img.height;if("userBanner"!==n.type)if(img.height>img.width){var t=192/e;n.sizeY=t}else n.sizeY=192;n.isEditing=!0},img.src=t},handleCroppaFileSizeExceed:function(){this.isEditing=!1,this.$store.dispatch("alert",{message:"The file you select exceeds the allowed size of 5MB",error:!0,duration:5e3})},handleCroppaFileTypeMismatch:function(){this.isEditing=!1,this.$store.dispatch("alert",{message:"The selected filetype is not supported",error:!0,duration:5e3})},cancelPicture:function(){this.myCroppa.remove(),this.isEditing=!1}}},D=(t(426),t(427),t(2)),component=Object(D.a)(I,function(){var e=this,n=e.$createElement,r=e._self._c||n;return!e.canEdit&&e.image?r("img",{staticClass:"shadow picture",attrs:{src:e.image}}):e.canEdit||e.image?r("div",{staticClass:"pictureContainer"},[r("croppa",{class:{hidden:!e.isEditing},attrs:{width:e.sizeX,height:e.sizeY,"prevent-white-space":!0,"show-remove-button":!1,"file-size-limit":5242880,"show-loading":!0,"replace-drop":!0,quality:e.quality,accept:"image/*","disable-click-to-choose":!0,placeholder:"","canvas-color":"transparent"},on:{"file-choose":e.handleCroppaFileChoose,"file-size-exceed":e.handleCroppaFileSizeExceed,"file-type-mismatch":e.handleCroppaFileTypeMismatch},model:{value:e.myCroppa,callback:function(n){e.myCroppa=n},expression:"myCroppa"}}),e._v(" "),e.image?r("img",{staticClass:"shadow picture",attrs:{src:e.image}}):r("img",{staticClass:"shadow picture",attrs:{src:t(332),alt:""}}),e._v(" "),r("div",{staticClass:"actions"},[r("button",{staticClass:"primary",on:{click:function(n){e.isEditing=!0,e.myCroppa.chooseFile()}}},[r("Budicon",{attrs:{icon:"edit",y:"2",color:"#fff",hoverColor:"#fff"}})],1),e._v(" "),e.isEditing?r("button",{staticClass:"primary",on:{click:e.savePicture}},[r("Budicon",{attrs:{icon:"tick",y:"5",color:"#fff",hoverColor:"#fff"}})],1):e._e(),e._v(" "),e.isEditing?r("button",{staticClass:"primary",on:{click:e.cancelPicture}},[r("Budicon",{attrs:{icon:"cross",y:"2",color:"#fff",hoverColor:"#fff"}})],1):e._e()])],1):r("img",{staticClass:"shadow picture",attrs:{src:t(332),alt:""}})},[],!1,null,"41bc89c6",null);n.a=component.exports},363:function(e,n,t){},364:function(e,n,t){},420:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateArtistImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"image"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateArtistImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"image"},value:{kind:"Variable",name:{kind:"Name",value:"image"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:119}};t.loc.source={body:"mutation updateArtistImage($id: Int!, $image: Upload!){\n\tupdateArtistImage(id: $id, image: $image) {\n\t\tid\n\t\timage\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var r=n.type;"NamedType"===r.kind&&t.add(r.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,t)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,t)}),n.definitions&&n.definitions.forEach(function(n){e(n,t)})}(e,n),r[e.name.value]=n}}),e.exports=t,e.exports.updateArtistImage=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var d=r[n]||new Set,l=new Set,c=new Set;for(d.forEach(function(e){c.add(e)});c.size>0;){var m=c;c=new Set,m.forEach(function(e){l.has(e)||(l.add(e),(r[e]||new Set).forEach(function(e){c.add(e)}))})}return l.forEach(function(n){var r=o(e,n);r&&t.definitions.push(r)}),t}(t,"updateArtistImage")},421:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateSourceImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"image"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateSourceImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"image"},value:{kind:"Variable",name:{kind:"Name",value:"image"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:119}};t.loc.source={body:"mutation updateSourceImage($id: Int!, $image: Upload!){\n\tupdateSourceImage(id: $id, image: $image) {\n\t\tid\n\t\timage\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var r=n.type;"NamedType"===r.kind&&t.add(r.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,t)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,t)}),n.definitions&&n.definitions.forEach(function(n){e(n,t)})}(e,n),r[e.name.value]=n}}),e.exports=t,e.exports.updateSourceImage=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var d=r[n]||new Set,l=new Set,c=new Set;for(d.forEach(function(e){c.add(e)});c.size>0;){var m=c;c=new Set,m.forEach(function(e){l.has(e)||(l.add(e),(r[e]||new Set).forEach(function(e){c.add(e)}))})}return l.forEach(function(n){var r=o(e,n);r&&t.definitions.push(r)}),t}(t,"updateSourceImage")},422:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateAlbumImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"image"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateAlbumImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"image"},value:{kind:"Variable",name:{kind:"Name",value:"image"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:117}};t.loc.source={body:"mutation updateAlbumImage($id: Int!, $image: Upload!){\n\tupdateAlbumImage(id: $id, image: $image) {\n\t\tid\n\t\timage\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var r=n.type;"NamedType"===r.kind&&t.add(r.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,t)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,t)}),n.definitions&&n.definitions.forEach(function(n){e(n,t)})}(e,n),r[e.name.value]=n}}),e.exports=t,e.exports.updateAlbumImage=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var d=r[n]||new Set,l=new Set,c=new Set;for(d.forEach(function(e){c.add(e)});c.size>0;){var m=c;c=new Set,m.forEach(function(e){l.has(e)||(l.add(e),(r[e]||new Set).forEach(function(e){c.add(e)}))})}return l.forEach(function(n){var r=o(e,n);r&&t.definitions.push(r)}),t}(t,"updateAlbumImage")},423:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateUserAvatar"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"image"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateUserAvatar"},arguments:[{kind:"Argument",name:{kind:"Name",value:"avatar"},value:{kind:"Variable",name:{kind:"Name",value:"image"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uuid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarImage"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:107}};t.loc.source={body:"mutation updateUserAvatar($image: Upload!) {\n\tupdateUserAvatar(avatar: $image) {\n\t\tuuid\n\t\tavatarImage\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var r=n.type;"NamedType"===r.kind&&t.add(r.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,t)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,t)}),n.definitions&&n.definitions.forEach(function(n){e(n,t)})}(e,n),r[e.name.value]=n}}),e.exports=t,e.exports.updateUserAvatar=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var d=r[n]||new Set,l=new Set,c=new Set;for(d.forEach(function(e){c.add(e)});c.size>0;){var m=c;c=new Set,m.forEach(function(e){l.has(e)||(l.add(e),(r[e]||new Set).forEach(function(e){c.add(e)}))})}return l.forEach(function(n){var r=o(e,n);r&&t.definitions.push(r)}),t}(t,"updateUserAvatar")},424:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateUserBanner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"image"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateUserBanner"},arguments:[{kind:"Argument",name:{kind:"Name",value:"banner"},value:{kind:"Variable",name:{kind:"Name",value:"image"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uuid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImage"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:107}};t.loc.source={body:"mutation updateUserBanner($image: Upload!) {\n\tupdateUserBanner(banner: $image) {\n\t\tuuid\n\t\tbannerImage\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var r=n.type;"NamedType"===r.kind&&t.add(r.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,t)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,t)}),n.definitions&&n.definitions.forEach(function(n){e(n,t)})}(e,n),r[e.name.value]=n}}),e.exports=t,e.exports.updateUserBanner=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var d=r[n]||new Set,l=new Set,c=new Set;for(d.forEach(function(e){c.add(e)});c.size>0;){var m=c;c=new Set,m.forEach(function(e){l.has(e)||(l.add(e),(r[e]||new Set).forEach(function(e){c.add(e)}))})}return l.forEach(function(n){var r=o(e,n);r&&t.definitions.push(r)}),t}(t,"updateUserBanner")},425:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateCharacterImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"image"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateCharacterImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"image"},value:{kind:"Variable",name:{kind:"Name",value:"image"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:125}};t.loc.source={body:"mutation updateCharacterImage($id: Int!, $image: Upload!){\n\tupdateCharacterImage(id: $id, image: $image) {\n\t\tid\n\t\timage\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var r=n.type;"NamedType"===r.kind&&t.add(r.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,t)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,t)}),n.definitions&&n.definitions.forEach(function(n){e(n,t)})}(e,n),r[e.name.value]=n}}),e.exports=t,e.exports.updateCharacterImage=function(e,n){var t={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var d=r[n]||new Set,l=new Set,c=new Set;for(d.forEach(function(e){c.add(e)});c.size>0;){var m=c;c=new Set,m.forEach(function(e){l.has(e)||(l.add(e),(r[e]||new Set).forEach(function(e){c.add(e)}))})}return l.forEach(function(n){var r=o(e,n);r&&t.definitions.push(r)}),t}(t,"updateCharacterImage")},426:function(e,n,t){"use strict";var r=t(363);t.n(r).a},427:function(e,n,t){"use strict";var r=t(364);t.n(r).a}}]);