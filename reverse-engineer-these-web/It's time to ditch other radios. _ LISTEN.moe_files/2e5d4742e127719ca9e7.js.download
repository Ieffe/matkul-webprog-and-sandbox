(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{362:function(t,e,n){},365:function(t,e,n){},418:function(t,e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"album"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"album"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nameRomaji"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"releaseDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nameRomaji"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"songs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"titleRomaji"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"snippet"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastPlayed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kpop"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nameRomaji"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nameRomaji"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"uploader"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarImage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"characters"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nameRomaji"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:538}};n.loc.source={body:"query album($id: Int!) {\n\talbum(id: $id) {\n\t\tid\n\t\tname\n\t\tnameRomaji\n\t\timage\n\t\treleaseDate\n\t\tlinks {\n\t\t\tname\n\t\t\turl\n\t\t}\n\t\tartists {\n\t\t\tid\n\t\t\tname\n\t\t\tnameRomaji\n\t\t\timage\n\t\t}\n\t\tsongs {\n\t\t\tid\n\t\t\ttitle\n\t\t\ttitleRomaji\n\t\t\tduration\n\t\t\tsnippet\n\t\t\tlastPlayed\n\t\t\tkpop\n\t\t\tartists {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\tnameRomaji\n\t\t\t\timage\n\t\t\t}\n\t\t\tsources {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\tnameRomaji\n\t\t\t\timage\n\t\t\t}\n\t\t\tuploader {\n\t\t\t\tdisplayName\n\t\t\t\tusername\n\t\t\t\tavatarImage\n\t\t\t}\n\t\t\tcharacters {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\tnameRomaji\n\t\t\t\timage\n\t\t\t\tartists {\n\t\t\t\t\tid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function m(t,e){for(var i=0;i<t.definitions.length;i++){var element=t.definitions[i];if(element.name&&element.name.value==e)return element}}n.definitions.forEach(function(t){if(t.name){var e=new Set;!function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var r=e.type;"NamedType"===r.kind&&n.add(r.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){t(e,n)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){t(e,n)}),e.definitions&&e.definitions.forEach(function(e){t(e,n)})}(t,e),r[t.name.value]=e}}),t.exports=n,t.exports.album=function(t,e){var n={kind:t.kind,definitions:[m(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var o=r[e]||new Set,l=new Set,d=new Set;for(o.forEach(function(t){d.add(t)});d.size>0;){var c=d;d=new Set,c.forEach(function(t){l.has(t)||(l.add(t),(r[t]||new Set).forEach(function(t){d.add(t)}))})}return l.forEach(function(e){var r=m(t,e);r&&n.definitions.push(r)}),n}(n,"album")},419:function(t,e,n){"use strict";var r=n(362);n.n(r).a},428:function(t,e,n){"use strict";var r=n(365);n.n(r).a},457:function(t,e,n){"use strict";n.r(e);n(62),n(25),n(51),n(37),n(23),n(21);var r=n(32),m=(n(12),n(5)),o=(n(31),n(418)),l=n.n(o),d=n(132),c=n.n(d),table=n(131),v={props:{artists:{type:Array,default:function(){return[]}}},computed:{preferRomaji:function(){return this.$store.state.preferRomaji}}},h=(n(419),n(2)),k=Object(h.a)(v,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contributingContainer"},[r("h2",{staticClass:"subtitle"},[t._v("\n\t\tContributing artists:\n\t")]),t._v(" "),r("div",{staticClass:"contributing"},t._l(t.artists,function(e,m){return r("div",{key:m,staticClass:"seiyuu"},[r("v-popover",{attrs:{trigger:"hover",placement:"top",offset:"10px"}},[r("nuxt-link",{attrs:{to:"/artists/"+e.id}},[e.image?r("img",{staticClass:"shadow artistPicture",attrs:{src:"https://cdn.listen.moe/artists/"+e.image}}):r("img",{staticClass:"shadow artistPicture",attrs:{src:n(332),alt:""}})]),t._v(" "),r("template",{slot:"popover"},[t._v("\n\t\t\t\t\t"+t._s(t.preferRomaji&&e.nameRomaji?e.nameRomaji:e.name?e.name:e.nameRomaji)+"\n\t\t\t\t")])],2)],1)}),0)])},[],!1,null,"dc0861e8",null).exports,f=n(333),N=n(133);function S(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,n)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):S(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var j,w={components:{DataTable:table.a,ContributingArtists:k,PictureUploader:f.a,Hover:N.a},head:function(){return{title:this.album?this.album.name?"".concat(this.album.name," ").concat(this.album.nameRomaji?"(".concat(this.album.nameRomaji,")"):""):this.album.nameRomaji:"LISTEN.moe",meta:[{hid:"twitter:card",name:"twitter:card",content:"summary"},{hid:"twitter:title",name:"twitter:title",content:"".concat(this.album?this.album.name?"".concat(this.album.name," ").concat(this.album.nameRomaji?"(".concat(this.album.nameRomaji,")"):""):this.album.nameRomaji:"LISTEN.moe")},{hid:"twitter:description",name:"twitter:description",content:this.album?this.album.description?"".concat(this.album.description.substring(0,250),"...\n\nSongs: ").concat(this.album.songs.length):"It's time to ditch other radios.\n\nSongs: ".concat(this.album.songs.length):"It's time to ditch other radios."},{hid:"twitter:image",name:"twitter:image",content:this.album?"https://cdn.listen.moe/covers/".concat(this.album.image):""},{hid:"twitter:label1",name:"twitter:label1",value:this.album?"Songs":""},{hid:"twitter:data1",name:"twitter:data1",value:this.album?"".concat(this.album.songs.length):""},{hid:"og:url",property:"og:url",content:"https://listen.moe".concat(this.$route.fullPath)},{hid:"og:title",property:"og:title",content:"".concat(this.album?this.album.name?"".concat(this.album.name," ").concat(this.album.nameRomaji?"(".concat(this.album.nameRomaji,")"):""):this.album.nameRomaji:"LISTEN.moe")},{hid:"og:description",property:"og:description",content:this.album?this.album.description?"".concat(this.album.description.substring(0,250),"...\n\nSongs: ").concat(this.album.songs.length):"It's time to ditch other radios.\n\nSongs: ".concat(this.album.songs.length):"It's time to ditch other radios."},{hid:"og:image",property:"og:image",content:this.album?"https://cdn.listen.moe/covers/".concat(this.album.image):""},{hid:"og:image:secure_url",property:"og:image:secure_url",content:this.album?"https://cdn.listen.moe/covers/".concat(this.album.image):""}]}},data:function(){return{isLoading:!1}},computed:{preferRomaji:function(){return this.$store.state.preferRomaji},albumName:function(){return this.preferRomaji&&this.album.nameRomaji?this.album.nameRomaji:this.album.name?this.album.name:this.album.nameRomaji},user:function(){return this.$store.state.user},canEdit:function(){return this.user&&(this.user.isAdmin||this.user.isJudge||this.user.isEditor)}},asyncData:(j=Object(m.a)(regeneratorRuntime.mark(function t(e){var n,r,m,data,o,d,v,h,k,f,N,S,j,w,F,R,C,_,x,O;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.app,r=e.redirect,t.prev=1,t.next=4,n.apolloProvider.defaultClient.query({query:l.a,variables:{id:parseInt(n.context.route.params.id,10)}});case 4:if(m=t.sent,data=m.data,o=y({},data),d=n.store.state.loggedIn,v=n.store.state.user,!d||!v){t.next=64;break}return t.next=12,n.apolloProvider.defaultClient.query({query:c.a,variables:{songs:data.album.songs.map(function(t){return t.id})}});case 12:h=t.sent,k=!0,f=!1,N=void 0,t.prev=16,S=h.data.checkFavorite[Symbol.iterator]();case 18:if(k=(j=S.next()).done){t.next=50;break}w=j.value,F=!0,R=!1,C=void 0,t.prev=23,_=o.album.songs[Symbol.iterator]();case 25:if(F=(x=_.next()).done){t.next=33;break}if((O=x.value).id===w){t.next=29;break}return t.abrupt("continue",30);case 29:O.favorite=!0;case 30:F=!0,t.next=25;break;case 33:t.next=39;break;case 35:t.prev=35,t.t0=t.catch(23),R=!0,C=t.t0;case 39:t.prev=39,t.prev=40,F||null==_.return||_.return();case 42:if(t.prev=42,!R){t.next=45;break}throw C;case 45:return t.finish(42);case 46:return t.finish(39);case 47:k=!0,t.next=18;break;case 50:t.next=56;break;case 52:t.prev=52,t.t1=t.catch(16),f=!0,N=t.t1;case 56:t.prev=56,t.prev=57,k||null==S.return||S.return();case 59:if(t.prev=59,!f){t.next=62;break}throw N;case 62:return t.finish(59);case 63:return t.finish(56);case 64:return o.album.links||(o.album.links=[]),t.abrupt("return",{album:o.album});case 68:return t.prev=68,t.t2=t.catch(1),n.store.dispatch("alert",{message:t.t2.message,error:!0,duration:5e3}),t.abrupt("return",r("/error"));case 72:case"end":return t.stop()}},t,null,[[1,68],[16,52,56,64],[23,35,39,47],[40,,42,46],[57,,59,63]])})),function(t){return j.apply(this,arguments)}),methods:{showModal:function(t,data,e){this.$store.dispatch("showModal",{modal:t,data:data,type:e})},pictureChange:function(t){var e=this,n=t.type,image=t.image;"album"===n&&(this.album.image=null,setTimeout(function(){e.album.image=image.updateAlbumImage.image},1e3))}}},F=(n(428),Object(h.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"hero profileSection"},[n("div",{staticClass:"hero-body baseline"},[n("div",{staticClass:"container profileSectionHeader"},[n("div",{staticClass:"columns profile"},[n("div",{staticClass:"column is-narrow info"},[n("PictureUploader",{attrs:{image:t.album.image?"https://cdn.listen.moe/covers/"+t.album.image:null,thingId:t.$route.params.id,type:"album"},on:{pictureChange:t.pictureChange}})],1),t._v(" "),n("div",{staticClass:"column vcenter"},[n("div",{staticClass:"description"},[n("Hover",{on:{edit:function(e){return t.showModal("names",t.album,"album")}}},[n("h1",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.preferRomaji&&t.album.nameRomaji?t.album.nameRomaji:t.album.name?t.album.name:t.album.nameRomaji)+"\n\t\t\t\t\t\t\t\t"),n("span",[t._v(" - "+t._s(t.album.songs.length)+" Songs")])])])],1),t._v(" "),n("div",{staticClass:"info"},[n("Hover",{on:{edit:function(e){return t.showModal("links",t.album,"album")}}},[t.album.links.length?t._l(t.album.links,function(link,e){return n("a",{key:e,attrs:{href:link.url,target:"_blank"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(link.name)+"\n\t\t\t\t\t\t\t\t")])}):[t._v("\n\t\t\t\t\t\t\t\t- No links for this album yet -\n\t\t\t\t\t\t\t")]],2)],1)])]),t._v(" "),t.canEdit?n("div",{staticClass:"row"},[n("button",{staticClass:"primary",on:{click:function(e){return t.showModal("mergeAlbum",t.album)}}},[t._v("\n\t\t\t\t\tMerge this album into another\n\t\t\t\t")])]):t._e()])]),t._v(" "),t.album.artists.length&&t.album.artists.length>1?n("div",{staticClass:"hero-body baseline"},[n("div",{staticClass:"container"},[n("ContributingArtists",{attrs:{artists:t.album.artists}})],1)]):t._e(),t._v(" "),n("div",{staticClass:"hero-body baseline"},[n("div",{staticClass:"container"},[n("DataTable",{attrs:{data:t.album.songs,showColumnAlbum:!1}})],1)])])},[],!1,null,"3386d58d",null));e.default=F.exports}}]);